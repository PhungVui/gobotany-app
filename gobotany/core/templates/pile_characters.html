<html>
<head>
  <style type="text/css">

    /* Eric Meyer */

    html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5,
    h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code,
    del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike,
    strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li,
    fieldset, form, label, legend, table, caption, tbody, tfoot, thead,
    tr, th, td { margin: 0; padding: 0; border: 0; outline: 0;
    font-size: 100%; vertical-align: baseline; background: transparent;
    } body { line-height: 1; } ol, ul { list-style: none; } blockquote,
    q { quotes: none; } blockquote:before, blockquote:after, q:before,
    q:after { content: ''; content: none; } :focus { outline: 0; } ins {
    text-decoration: none; } del { text-decoration: line-through; }
    table { border-collapse: collapse; border-spacing: 0; }

    /* NEWFS */

    body {
      font-family: Helvetica, “Helvetica Neue”, Arial, sans-serif;
    }
    body p, .fullbar {
      margin: 9px 6px;
    }
    .hbars {
      margin: 0.5em 0.5em 1em 3em;
      font-size: 0.84em;
    }
    .hbars .yes, .hbars .no, .hbars .warning, .hbars .species {
      border: 1px solid white;
      height: 1em;
      max-height: 1em;
      width: 0.9em;
      max-width: 0.9em;
      text-align: center;
    }
    .hbars .no { background-color: #eee; }
    .hbars .yes { background-color: #8f8; color: #080; }
    .hbars .na .yes { background-color: #dd7; color: #880; }
    .hbars .novalue .yes { background-color: #f88; color: #800; }
    .hbars .species span {
      position: relative;
    }
    .hbars .species a {
      visibility: hidden;
      position: absolute;
      top: 1.0em;
      left: -0.1em;
      background-color: #ffa;
      padding: 6px;
      font-style: italic;
    }
    .hbars .species:hover {
      background-color: #ff0;
    }
    .hbars .species:hover a {
      visibility: visible;
    }

  </style>
</head>
<body>

  <h1>Characters for pile {{ pile.name }}</h1>

  <p>
    In order of “goodness” as measured by
    entropy (how well it narrows down the list of remaining species),
    coverage (do most species in the pile have a value for this character),
    and observability (an integer that botanists enter into our database).
  </p>

  {% for character in characters %}
  <p>
    {{ character.name }}
    ({{ character.type }})
    entropy={{ character.entropy|floatformat:2 }},
    coverage={{ character.coverage|floatformat:2 }},
    ease-of-observability={{ character.ease_of_observability }},
    score={{ character.score|floatformat:2 }}
    <table class="hbars">

      {% for value_str, species_count, row in character.metarows %}
      <tr {% if value_str == 'NA' %}class="na"{% endif %}
          {% if not value_str %}class="novalue"{% endif %}
          >
        {% for item in row %}
          {% if item == 'Y' %}
            <td class="yes">✓</td>
          {% endif %}
          {% if item == 'n' %}
            <td class="no"></td>
          {% endif %}
        {% endfor %}
        <td>
          {% if not value_str %}
            No value
          {% else %}
            <b>“{{ value_str }}”</b>
          {% endif %}
          — {{ species_count }} species
        </td>
      </tr>
      {% endfor %}

      <tr>
        {% for species in character.species_row %}
          <td class="species">
            <span>
              #
              <a href="/admin/core/taxon/{{ species.id }}/">
                {{ species.scientific_name }}
              </a>
            </span>
          </td>
        {% endfor %}
      </tr>
    </table>

  </p>
  {% endfor %}

</body>
</html>
