{% load facebook_connect %}
<div class="box">
    <div class="section">
        {% url ps-main as u %}
        <h4><a {% ifnotequal request.path u %}href="{{ u }}"{% endifnotequal %}>PlantShare</a></h4>
    </div>
    {% if user.is_authenticated %}
    <div class="section">
        {% url ps-profile as u %}
        <h4><a {% ifnotequal request.path u %}href="{{ u }}"{% endifnotequal %}>My Profile</a></h4>
    </div>
    <div class="section">
        <h4><a href="{% url auth_logout %}">Log Out</a></h4>
    </div>
    {% else %}
    <div class="section">
        {% url registration_register as u %}
        <h4><a {% ifnotequal request.path u %}href="{{ u }}"{% endifnotequal %}>Sign Up for PlantShare</a></h4>
    </div>
    {% endif %}
</div>

{% if not user.is_authenticated %}
<div id="login" class="box">
    <h4>Log In</h4>
    <form method="post" action="{% url auth_login %}">
        {% csrf_token %}
        {% comment %} 
        Conform to Django auth's AuthenticationForm fields for now, until we create
        a nice template tag or widget for this, so it can appear on every page.
        Otherwise, we'd have to manually create an AuthenticationForm in every single
        view or create a context processor for it.
        {% endcomment %}
        <label for="id_username">Username</label>
        <input id="id_username" type="text" name="username" maxlength="30" />
        <label for="id_password">Password</label>
        <input type="password" name="password" id="id_password" />
        <input type="submit" class="button" value="Login">
        <input type="hidden" name="next" value="{% url ps-main %}" />
    </form>
    <div>
        <a href="#">
            {% facebook_button %}
        </a>
    </div>
</div>
{% facebook_script %}
{% endif %}
