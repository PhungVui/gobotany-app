{% extends "gobotany/_page_free_sidebar.html" %}
{% load gobotany_tags %}
{% load mapping_tags %}
{% load plantshare_tags %}

{% block title %}Sightings: PlantShare{% endblock %}

{% block body_attributes %}id="sightings" class="plantshare"{% endblock %}

{% block main_content %}
<h1>Recent Sightings</h1>

{% regroup sightings by created as created_date_list %}

<ul>
{% for sightings in created_date_list %}
    <li>{{ sightings.grouper }}
    <ul>
        {% for sighting in sightings.list %}
            <li><a
                href="{% url 'ps-sighting' sighting.id %}">{{ sighting.identification|italicize_if_scientific|safe }}
                at {{ sighting.location|capfirst }}</a>
                by
                {% comment %}
                TODO: revisit getting the user's display name here.
                For now, just show the username to keep the query count low.
                {% endcomment %}
                {# unique_user_display_name sighting.user #}
                {{ sighting.user }}
                </li>
        {% endfor %}
    </ul>
    </li>
{% endfor %}
</ul>

{% endblock %}

{% block sidebar_content %}
    {% include "_plantshare_navigation.html" %}
{% endblock %}

