{% extends "simplekey/base.html" %}
{% load highlight %}

{% block title %}
  Plant search
{% endblock %}

{% block content %}
<div id="search-results">
    {% if query %}
    <h1>Results <strong>{{ page.number|add:'-1' }}-xx</strong> of
        <strong>{{ paginator.count }}</strong> for
        <strong>{{ query }}</strong>
    </h1>
    <p class="time">(xx seconds)</p>

    <ul id="search-results-list">
    {% for result in page.object_list %}
        <li>
            <h2>
                <!-- TODO: need custom highlighter that does not excerpt the document title -->
                {% if result.scientific_name %}
                    <a href="http{% if request.is_secure %}s{% endif %}://{{ request.get_host }}/plant/slug-missing/{{ result.scientific_name }}/"><em>{% highlight result.scientific_name with query %}</em></a>
                {% else %}
                    {% if result.model_name == 'family' %}
                        <a href="http{% if request.is_secure %}s{% endif %}://{{ request.get_host }}/simple/families/{{ result.name|lower }}/">Family {% highlight result.name with query %}</a>
                    {% else %}
                        {% if result.model_name == 'genus' %}
                            <a href="http{% if request.is_secure %}s{% endif %}://{{ request.get_host }}/simple/genera/{{ result.name|lower }}/">Genus <em>{% highlight result.name with query %}</em></a>
                        {% else %}
                            (unknown model name)
                        {% endif %}
                    {% endif %}
                {% endif %}
            </h2>
            <p>
            {% highlight result.text with query %}
            <p>
        </li>
        {% empty %}
        <li class="no-results">No results found.</li>
    {% endfor %}
    </ul>

    {% include "simplekey/search_navigation.html" %}

    {% else %}
        {# Show some example queries to run? #}
    {% endif %}
</div>

{% endblock %}
