{% extends "simplekey/_new_base.html" %}
{% load simplekey_extras %}

{% block title %}
Genus: {{ genus.name }} {% if common_name %}({{ common_name }}){% endif %}
{% endblock %}

{% block js_top %}
    <script>
        API_URL = '{% url api-base %}';
    </script>

    {# TODO: eventually move elsewhere #}
    {% include "simplekey/_partner_site_js.html" %}
{% endblock %}

{% block js_require %}
    define('args', [], {
        genus_slug: '{{ genus.slug }}'
    });
    require(['simplekey/genus']);
{% endblock %}

{% block body_attributes %}id="genus" class="claro app genus"{% endblock %}

{% block body_content %}
    {% include "simplekey/_header.html" %}

    <div class="content">
        <div class="container">
            <div id="main">
                <h2>Genus: <i>{{ genus.name }}</i></h2>
                {% if common_name %}<h3>{{ common_name }}</h3>{% endif %}
                <p class="description">
                {% if item.description %}
                    {{ item.description }}
                {% else %}
                    TO DO: Add description in the database.
                    This is a placeholder description.
                    (Test glossary highlighting here with a few terms,
                    such as abaxial, berry, creeping, fruit and
                    perennial.)
                {% endif %}
                </p>

                <div class="pics">
                    {% for drawing in genus_drawings %}
                        <div>
                            <a rel="shadowbox"
                               href="{{ drawing.image_medium }}">
                                <img class="map"
                                    src="{{ drawing.thumb_small }}"
                                    alt="{{ drawing.alt }}"></a>
                            <p>{{ drawing.alt }}</p>
                            <a class="enlarge" rel="shadowbox"
                                href="{{ drawing.image_medium }}">
                                <img class="zoom"
                                src="/static/images/icons/zoom.png"
                                alt="enlarge"></a>
                        </div>
                    {% endfor %}
                </div>

                <h4>Family</h4>
                <p class="family">
                    <a href="{% url simplekey-family genus.family.slug %}"
                    >{{ genus.family.name }}{% if genus.family.common_name %} ({{ genus.family.common_name }}){% endif %}</a></p>

                <h4>This Genus&#8217;s Species:</h4>
                <ul class="species">
                {% for species in genus.taxa.all %}
                    <li><i><a href="{% url simplekey-species species.genus.slug species.epithet %}"
                    >{{ species.scientific_name }}</a></i></li>
                {% endfor %}
                </ul>

                {# TODO: need genus-species button, like family-genera button #}
                <a class="genus-species-btn"
                    href="{% url simplekey-pile pilegroup.slug pile.slug %}#genus={{ genus.name }}">Key
                    to this Genus&#8217;s Species</a>

            </div>
            <div id="sidebar" style="height: 634px;">
                {% include "simplekey/_sidebar_items.html" %}
            </div>
            <div class="clearit"></div>
        </div>
    </div>
{% endblock %}

