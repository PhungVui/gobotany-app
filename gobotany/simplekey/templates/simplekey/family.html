{% extends "simplekey/_new_base.html" %}
{% load simplekey_extras %}

{% block title %}
Family: {{ family.name }} {% if common_name %}({{ common_name }}){% endif %}
{% endblock %}

{% block js_top %}
    <script>
        API_URL = '{% url api-base %}';
    </script>

    {# TODO: eventually move elsewhere #}
    {% include "simplekey/_partner_site_js.html" %}
{% endblock %}

{% block js_require %}
    define('args', [], {
        family_slug: '{{ family.slug }}'
    });
    require(['simplekey/family']);
{% endblock %}

{% block body_attributes %}id="family" class="claro app family"{% endblock %}

{% block body_content %}
    {% include "simplekey/_header.html" %}

    <div class="content">
        <div class="container">
            <div id="main">
                <h2>Family: {{ family.name }}</h2>
                <h3>{% if common_name %}{{ common_name }}{% endif %}</h3>
                <p class="description">
                {% if family.description %}
                    {{ family.description }}
                {% else %}
                    (Description Coming Soon)
                {% endif %}
                </p>
                
                <div class="pics">
                    {% for drawing in family_drawings %}
                        <div class="img-gallery">
                            <div class="plant">
                                <div class="frame"></div>
                                <a href="{{ drawing.image_medium }}"
                                    title="{% photo_credit drawing drawing.content_object.scientific_name %}">
                                    <img class="map"
                                        src="{{ drawing.thumb_large }}"
                                        alt="{% photo_credit drawing drawing.content_object.scientific_name %}"></a>
                                </a>
                            </div>
                        </div>
                    {% endfor %}
                </div>

                <h4>This Family&#8217;s Genera:</h4>
                <ul class="genera">
                {% for genus in family.genera.all %}
                    <li><i><a href="{% url simplekey-genus genus.slug %}"
                    >{{ genus.name }}</a></i></li>
                {% endfor %}
                </ul>

                <a class="family-genera-btn" href="{% url simplekey-pile pilegroup.slug pile.slug %}#family={{ family.name }}">Key
                    to this Family&#8217;s Genera</a>

            </div>
            <div id="sidebar" style="height: 634px;">
                {% include "simplekey/_sidebar_items.html" %}
            </div>
            <div class="clearit"></div>
        </div>
    </div>
{% endblock %}
