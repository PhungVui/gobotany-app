{% extends "simplekey/base.html" %}
{% block title %}
{{ scientific_name }}
{% endblock %}

{% block js_top %}
    <!-- SVGWeb script - must be first, must have data-path.
         Also, SVG must be served from same domain as the page. -->
    <script src="/static/svgweb/svg.js" data-path="/static/svgweb/"></script>
{% endblock %}

{% block content %}
  <p>{{ pilegroup.name }}: {{ pile.name }}</p>
  <h1><i>{{ scientific_name }}</i>
      <span class="auth">{{ taxon.taxonomic_authority }}</span></h1>
  <div id="species">
      <h2>Common name here</h2>
      <div id="images">
          <h3>Images</h3>
          <p>
              {% if species_images %}
                  {% for i in species_images %}
                      {% if forloop.first %}
                          <img src="{{ i.image.url }}">
                      {% endif %}
                  {% endfor %}
              {% else %}
                  <p>(missing)</p>
              {% endif %}
          </p>
          <p class="nav"><a href="#">&lt; prev</a> <span>? of ?</span>
             <a href="#">next &gt;</a></p>
      </div>
      <div id="info">
          <h3>Description</h3>
          <p>{{ taxon.description }}</p>

          <h3>Characteristics</h3>
          {% if characteristics %}
              {% for characteristic in characteristics %}
                  <p><strong>{{ characteristic.name }}:</strong>
                     {{ characteristic.value }}</p>
              {% endfor %}
          {% else %}
              <p>N/A</p>
          {% endif %}

          <h3>Habitat</h3>
              {% if habitats|length > 0 %}
              <ul>
                  {% for habitat in habitats %}
                      <li>{{ habitat }}</li>
                  {% endfor %}
              </ul>
              {% else %}
                  <p>(missing)</p>
              {% endif %}
          </ul>

          <h3>Distribution &amp; Endangered/Invasive Status</h3>

          <div>
          <p><strong>ME:</strong> {{ states_status.ME }}</p>
          <p><strong>NH:</strong> {{ states_status.NH }}</p>
          <p><strong>VT:</strong> {{ states_status.VT }}</p>
          </div>
          <div>
          <p><strong>MA:</strong> {{ states_status.MA }}</p>
          <p><strong>CT:</strong> {{ states_status.CT }}</p>
          <p><strong>RI:</strong> {{ states_status.RI }}</p>
          </div>
          
          <h3>Wetland Status</h3>
          <p>
              {{ wetland_status }}
          </p>

          <h3>North American Native Plant</h3>
          <p>
              {% if taxon.north_american_native %}
                  Yes
              {% else %}
                  No
              {% endif %}
          </p>
      </div>
      <div id="more-info">
          <h3>Distribution by County</h3>
          <!-- TODO: replace src with generated shaded SVG URL -->
          <!--[if IE]>
          <object src="/static/graphics/new-england-counties.svg"
                  classid="image/svg+xml" id="dist-county-map"
                  title="distribution map for {{ scientific_name }}">
          <![endif]-->
          <!--[if !IE]>-->
          <object data="/static/graphics/new-england-counties.svg"
                  type="image/svg+xml" id="dist-county-map"
                  title="distribution map for {{ scientific_name }}">
          <!--<![endif]-->
          </object>

          <h3>Common Uses</h3>
          <p>
              {% if taxon.uses|length > 0 %}
                  {{ taxon.uses }}
              {% else %}
                  N/A
              {% endif %}
          </p>

          <h3>Folklore &amp; History</h3>
          <p>
              {% if taxon.factoid|length > 0 %}
                  {{ taxon.factoid }}
              {% else %}
                  N/A
              {% endif %}
          </p>

          <h3>Classification</h3>
          <p><strong>Family:</strong> {{ taxon.family }}</p>

      </div>
  </div>
{% endblock %}

{% block js_bottom %}
  <script>
      dojo.require('gobotany.sk.species');
      dojo.addOnLoad(function() {
          gobotany.sk.species.init('{{ scientific_name }}');
      });
  </script>
{% endblock %}
